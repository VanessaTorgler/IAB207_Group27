{% extends "base.html" %}

{% block title %}
<title>Bondra – My Events</title>
{% endblock %}

{% block header %}
<div class="container d-flex flex-column flex-md-row align-items-md-center justify-content-between gap-3">
  <div>
    <h1 class="h3 mb-1">My Events</h1>
  </div>
  <a href="{{ url_for('main.createUpdate') }}" class="btn btn-primary d-none d-md-inline-flex">Create Event</a>
</div>
{% endblock %}

{% block content %}
<main id="main" class="container py-4">

  {% if events and events|length > 0 %}
  <div class="row row-cols-1 row-cols-sm-2 row-cols-lg-3 g-4">
    {% for e in events %}
    <div class="col">
      <article class="card h-100">
        {% set cover = e.images[0].url if e.images else None %}
        {% if cover %}
          {% if cover.startswith('/') %}
            <img src="{{ cover }}" class="card-img-top" alt="{{ e.title }} cover image">
          {% else %}
            <img src="{{ url_for('static', filename=cover) }}" class="card-img-top" alt="{{ e.title }} cover image">
          {% endif %}
        {% else %}
          <img src="{{ url_for('static', filename='img/founders-breakfast.jpg') }}" class="card-img-top" alt="{{ e.title }} cover image">
        {% endif %}

        <div class="card-body d-flex flex-column">
          <h2 class="h5 card-title mb-2">{{ e.title }}</h2>
          <div class="mt-auto">
            <a class="btn btn-primary" href="{{ url_for('main.event', event_id=e.id) }}">View Event</a>
          </div>
        </div>
      </article>
    </div>
    {% endfor %}
  </div>
  {% else %}
    <div class="card empty-state my-4">
    <div class="card-body d-flex flex-column align-items-center justify-content-center text-center p-5">
        <h2 class="h5 fw-semibold mb-1">You aren’t hosting any events yet</h2>
        <p class="text-muted mb-3">Kick things off by creating your first event.</p>
        <a class="btn btn-primary btn-lg" href="{{ url_for('main.createUpdate') }}">
        <i class="bi bi-plus-circle me-1"></i> Create your first event
        </a>
    </div>
    </div>

  {% endif %}

</main>
{% endblock %}
